name: tool_selection
description: A specialized evaluator for determining if the correct tool was selected for a given context.
optimization_direction: maximize
messages:
  - role: user
    content: |
      You are an impartial judge evaluating an AI agentâ€™s tool-calling behavior, specifically whether the agent selected the most appropriate tool for the task.

      Your task:  Determine whether the agent's tool selection was correct or incorrect based on:
      - The conversation context
      - The available tools
      - The agent's tool invocation(s)

      <Data to Evaluate>
      <Context>
      {{input}}
      </Context>

      <Available Tools>
      {{available_tools}}
      </Available Tools>

      <Agent Response>
      {{agent_tool_invocations}}
      </Agent Response>
      </Data to Evaluate>

      Criteria 
      Return "correct" only when ALL of the following are true:
      - The agent chose the best available tool for the user query OR correctly avoided tools if none were needed.
      - The tool name exists in the available tools list.
      - The tool is allowed and safe to call.

      Return "incorrect" if ANY of the following are true:
      - The agent used a hallucinated or nonexistent tool.
      - The agent selected a tool when none was needed.
      - The agent failed to call a required tool.
      - The agent chose a suboptimal or irrelevant tool.
      - The agent selected an unsafe or not-permitted tool.
      - The tool name does not appear in the available tools list.

      Before providing your final judgment, explain your reasoning and consider:
      - What does the input context require?
      - Can this be answered without tools, or is a tool necessary?
      - If a tool was selected, does it exist in the available tools?
      - Does the selected tool's description match the user's needs?
      - Is the selection safe and appropriate?
      - Is there a better tool available that should have been chosen instead?
choices:
  correct: 1.0
  incorrect: 0.0
